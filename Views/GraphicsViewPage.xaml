<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="DefBTGBrown.Views.GraphicsViewPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:models="clr-namespace:DefBTGBrown.Models"
    xmlns:skia="clr-namespace:SkiaSharp.Views.Maui.Controls;assembly=SkiaSharp.Views.Maui.Controls"
    xmlns:viewmodel="clr-namespace:DefBTGBrown.ViewModels"
    Title="GraphicsViewPage"
    Shell.NavBarIsVisible="False">
    <Grid
        x:Name="GridPrincipal"
        ColumnDefinitions="6*, 4*"
        ColumnSpacing="10">

        <Border
            x:Name="chartView"
            Grid.Column="0"
            Padding="0">

            <Grid>
                <skia:SKCanvasView x:Name="skiaCanvas" PaintSurface="ChartView_PaintSurface" />
            </Grid>

        </Border>

        <ScrollView Grid.Column="1">
            <VerticalStackLayout Spacing="5">

                <Label Text="Preço Inicial" TextColor="White" />
                <Entry
                    Keyboard="Numeric"
                    Text="{Binding InitialPrice, Mode=TwoWay}"
                    TextColor="White" />
                <Label
                    FontSize="12"
                    IsVisible="{Binding InitialPrice.HasErrors}"
                    Text="{Binding InitialPrice.Errors[0]}"
                    TextColor="Red" />

                <Label
                    Margin="0,10,0,0"
                    Text="Volatilidade Média(%)"
                    TextColor="White" />
                <Entry
                    Keyboard="Numeric"
                    Text="{Binding Volatilidade, Mode=TwoWay}"
                    TextColor="White" />
                <Label
                    FontSize="12"
                    IsVisible="{Binding Volatilidade.HasErrors}"
                    Text="{Binding Volatilidade.Errors[0]}"
                    TextColor="Red" />

                <Label
                    Margin="0,10,0,0"
                    Text="Retorno Médio(%)"
                    TextColor="White" />
                <Entry
                    Keyboard="Numeric"
                    Text="{Binding Media, Mode=TwoWay}"
                    TextColor="White" />
                <Label
                    FontSize="12"
                    IsVisible="{Binding Media.HasErrors}"
                    Text="{Binding Media.Errors[0]}"
                    TextColor="Red" />

                <Label
                    Margin="0,10,0,0"
                    Text="Tempo(dias)"
                    TextColor="White" />
                <Entry
                    Keyboard="Numeric"
                    Text="{Binding Time, Mode=TwoWay}"
                    TextColor="White" />
                <Label
                    FontSize="12"
                    IsVisible="{Binding Time.HasErrors}"
                    Text="{Binding Time.Errors[0]}"
                    TextColor="Red" />

                <Button
                    Margin="0,20,0,0"
                    Command="{Binding SimulateCommand}"
                    CornerRadius="10"
                    FontAttributes="Bold"
                    Text="Simular"
                    TextColor="Black"
                    WidthRequest="200" />

                <ListView
                    HorizontalOptions="Start"
                    ItemsSource="{Binding Components}"
                    RowHeight="50"
                    SelectionMode="None"
                    WidthRequest="200">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="{x:Type models:BrownianComponent}">
                            <ViewCell>
                                <Border
                                    Margin="10,5"
                                    Padding="0"
                                    BackgroundColor="White">
                                    <Grid Padding="5">
                                        <Label
                                            FontAttributes="Bold"
                                            Text="{Binding InitialPrice, StringFormat='Inicial: {0:F2}'}"
                                            TextColor="Black" />
                                    </Grid>
                                </Border>
                            </ViewCell>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>